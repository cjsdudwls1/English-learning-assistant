## 기획 및 개발 해야 할 일 

### 1. 편집 모드(Edit Mode) 추가

- **기능 개요:**  
    - AI가 자동으로 생성한 문제를 선생님(권한자)이 직접 **수정** 및 **편집**할 수 있는 **'편집 모드(Edit Mode)'** 기능 추가

- **주요 목적:**  
    - AI 생성 문제의 품질 및 실제 수업 활용도를 높이기 위함  
    - 수동 편집을 통해 현장에 더 적합한 문제로 커스터마이징 가능

- **예상 구현 방법:**  
    1. 각 문제 옆에 '편집' 버튼 추가
    2. 클릭 시 문제 내용 및 정답, 오답 선택지 등 직접 수정 가능한 UI 노출
    3. 수정/저장 이력 관리 및 롤백 기능 고려

> ✨ **편집 모드는 선생님만 접근 가능한 권한 기능임을 강조**


### 2. 문제 은행 및 공유 시스템 구축 (기획)
* **문제 은행 구축 기획:**
    * AI 생성 문제 외에, **선생님 권한자**가 검증하고 만든 문제를 포함하는 **막강한 문제 은행 툴** 구축 방안 기획.
    * **선생님 간의 문제 공유 및 참조 시스템** (계약된 선생님들이 만든 문제 오픈) 기획.

**구현 방법:**  
1. 생성 문제 관련 DB에 **'검증완료'(true/false)** 스키마 추가  
2. **선생님(권한자)**와 **학생** 간의 관계 연결,  
   - 선생님에게 열람 권한 설정
   - 선생님에게 사용자 친화적 **UI** 제공




* **오답 분석 상세 리스트 노출 개발:**
    * 현재 화면에서 **'오답 8' 등의 숫자/항목을 클릭**했을 때, 오답에 대한 **상세 리스트/정보**를 노출하는 기능 개발.
    * **문제 이미지/OCR 정보**는 노출하지 않고, 위에서 분석 된 **분석 정보**를 통해 해당 문제의 특성을 설명할 수 있도록 구현.

+질문:  위 요청사항 2개를 4DEPTH 우측에 '?' 기능과 어떤 차별 점을 두고 개발하면 좋을까요? 
?를 누르면 나오는 교수님께서 제공해주신 분류체계 기반 정보들을 그대로 출력 합니다.

* **유사 문제 생성 로직 개선:**
    * 기존 카테고리 기반 문제 생성이 아닌, **틀린 문제와 유사한 문제** 또는 **참고하여 만들어진 문제**를 생성하도록 문제 생성 로직 개선.

## 인지하고 있으면 되는는 일 


### 1. 학습 분석 및 평가 기능 추가 (기획 및 개발)
* **평상시 학습 vs. 평가 시험 구분:**
    * **시험지**를 찍어 올릴 때는 **별도의 버튼**을 눌러 '시험 본 것'으로 구분하여 기록할 수 있는 기능 기획/개발. (이는 현재 컨셉과 맞지 않을 수 있으므로, **현업 의견 수렴 후 반영 여부 최종 판단** 필요)
* **학습 성과 변화 그래프 표현 기능 기획/개발:**
    * 학생의 특정 부족 영역(예: 어휘)을 평가했을 때, 시간이 지나 **성적이 상승했는지 하락했는지**를 **그래프**로 표현하는 기능 기획/개발.
    * (전제: 현재는 이러한 로직이 없으므로, **로직 기획**이 우선되어야 함.)


### 2. 카테고리/분류 체계 커스터마이징 (기획 및 개발)
* **맞춤형 분류 체계 지원 기능 기획:**
    * **학원/학교/선생님별**로 표준 분류(예: 학년/일반론적 분류) 외에 **고유의 맞춤형 분류(Customizing Category)**를 설정할 수 있도록 지원하는 기능 기획.
    * **문제점 및 해결 방안 기획:** 개별 맞춤 분류만 있으면 비교가 불가하므로, **공통 분류 체계**와 **개별 분류 체계**를 **동시에** 분류하도록 하여 **비교 가능성**을 확보하는 방안 기획.



----11.21.통화 정리----

---

### 1. 기능 개발 및 개선 요청

#### 1.1. 문제 분석 기능 개발 요청

**핵심 요구사항:**
사용자가 통계 화면에서 정답/오답 숫자를 클릭하면, 해당 문제들에 대한 상세 분석 정보를 보여주는 기능이 필요합니다.

**현재 문제점:**
* 현재 구현된 4depth의 '?' 기능은 **단원(카테고리)**에 대한 정보만 제공하며, **개별 문제**에 대한 정보는 제공하지 않습니다.

**구현 방안:**

1. **문제 분석 메타데이터 생성 및 저장:**
   * 사용자가 이미지를 업로드하면, 각 문제에 대해 다음 정보를 AI로 분석하여 생성:
     * 문제 난이도
     * 단어 난이도
     * 문제 유형
     * 분석 정보 (상세 설명)
   * 분석 결과를 데이터베이스에 메타데이터로 저장
   * **일관성 보장:** 같은 문제에 대해 항상 동일한 분석 결과를 제공하기 위해 AI 호출 시 `temperature=0.0` 설정

2. **UI/UX 구현:**
   * 통계 화면에서 정답/오답 숫자 클릭 시:
     * 해당 정/오답에 해당하는 문제들의 메타데이터를 조회
     * 문제 단위로 박스 형태로 정보 표시
     * 시간 순서: 가장 최근 문제가 상단에 표시
   * **저작권 고려:** 문제 본문은 표시하지 않고, 난이도, 유형, 분석 정보 등 메타데이터만 표시

**데이터 흐름:**
```
이미지 업로드 → AI 분석 → 문제 메타데이터 생성 → DB 저장
                                                      ↓
통계 화면 정/오답 클릭 → 해당 문제 메타데이터 조회 → UI 표시
```  

#### 1.2. 틀린 문제 기반 문제 생성 (난이도 및 유형)
*   **난이도 분류 기준:** 난이도는 상중하 또는 단어 난이도(1부터 9까지)를 기준으로 설정할 수 있습니다.
*   **생성 로직 변경 요청:** 현재는 분류(classification) 기반으로 문제가 생성되지만, 앞으로는 사용자가 틀린 문제를 기반으로 (예: 어려운 난이도를 많이 틀렸으면 어려운 문제를 내거나, 단어 난이도 7 이상에서 많이 틀렸으면 그 수준에서 문제를 내는 방식) 문제가 생성되어야 합니다.
*   **OCR 문제 정보 표시:** OCR(광학 문자 인식) 문제에 대한 정보를 따로 표시했으면 좋겠다는 의견이 제시되었습니다.

#### 1.3. 신규 기능 아이디어
대화 중 교수님께서 여러 가지 새로운 문제 유형 및 기능을 제안하셨습니다:

## 요구사항: 문제 불러오기 및 생성 기능 개선

### . 기존 생성된 문제 불러오기 기능 추가
- **목적**: Gemini API 사용료 절감 및 효율성 향상
- **구현 내용**: 
  - `generated_problems` 테이블의 이미 생성된 문제를 조회하는 기능 추가
  - 사용자가 설정한 문제유형(서술형, o/x등) 별 갯 수에 맞게 문제를 찾아와서 출제.
  - 모자란 문제는 gemini api로 생성하여 출제.

- **핵심 기능 상세**:
  - **1단계: 기존 문제 검색**
    - 사용자 설정 문제유형별로 `generated_problems` 테이블에서 문제 조회
    - 필터 조건:
      - `user_id`: 필터링하지 않음 (모든 사용자의 문제 포함 - 데이터 격리 불필요)
      - `problem_type`: 사용자가 설정한 유형 (multiple_choice, short_answer, essay, ox)
      - `language`: 사용자 언어 설정 일치
      - 분류(classification) 매칭: 우선순위
        1. 완전 일치 (depth1~4 모두 일치)
        2. 부분 일치 (depth1~3 일치) - 옵션
        3. 유사 분류 (depth1~2 일치) - 옵션
    - 중복 방지 옵션:
      - [ ] 이미 풀이한 문제 제외 (problem_solving_sessions 테이블 확인)
      - [ ] 최근 N일 내 출제된 문제 제외 (사용자 설정)
  
  - **2단계: 문제 수 확인 및 부족분 계산**
    - 각 문제 유형별로 기존 문제 개수 vs 요청 개수 비교
    - 부족한 개수만 새로 생성하도록 계산
    - 예시: 객관식 5개 요청 → 기존 3개 발견 → 2개만 새로 생성
  
  - **3단계: 부족한 문제 새로 생성**
    - Gemini API를 통해 부족한 개수만 생성
    - 기존 문제 생성 로직 재사용

- **UI/UX 요구사항**:
  - **진행 상태 표시**:
    ```
    1/3 단계: 기존 문제 검색 중...
      → 객관식: 3개 발견
      → 서술형: 0개 발견
    2/3 단계: 새 문제 생성 중...
      → 서술형: 2개 생성 중... (2/2)
    3/3 단계: 시험지 구성 완료!
    ```
  
  - **문제 출처 표시**:
    - 각 문제마다 배지/라벨 표시: "기존 문제" / "새로 생성된 문제"
    - 툴팁: "이 문제는 이전에 생성된 문제를 재사용했습니다"
    - 통계 요약: "기존 문제 3개 / 새로 생성된 문제 2개 = 총 5개"
  
  - **설정 옵션**:
    - [✓] 기존 문제 먼저 불러오기 (기본 체크)
    - [✓] 모자란 문제만 새로 생성 (기본 체크)
    - [ ] 이미 풀이한 문제 제외
    - [ ] 최근 7일 내 출제된 문제 제외
    - 분류 매칭 정확도:
      - [ ] 정확히 일치하는 문제만
      - [✓] 유사한 문제도 포함 (기본 선택)
  
  - **버튼 명확성**:
    - 버튼 텍스트: "기존 문제 불러오기 (빠르고 무료)"
    - vs "AI로 시험지 생성 (새로운 문제 생성)"
    - 차이점 설명 툴팁 제공

- **오류 처리**:
  - 기존 문제 조회 실패 시: 새로 생성으로 폴백 (에러 표시)
  - 일부 문제 생성 실패 시: 생성된 문제만이라도 제공 (부분 성공 표시)
  - 공유 문제 풀 접근: 모든 사용자의 문제를 조회하여 효율성 최대화

- **통계 및 피드백**:
  - API 사용량 절감 통계: "API 사용량 절감: 60%"
  - 문제 출처 요약: "기존 문제 재사용: 3개 / 새로 생성: 2개"
  - 사용자 피드백 수집: "이 문제가 너무 쉽다/어렵다" (향후 개선용)

### 2. 기존 기능 유지
- **'AI로 시험지 생성' 버튼 및 기능**: 반드시 유지 (새로운 문제 생성용)
- 기존 AI 생성 워크플로우는 그대로 작동해야 함

### 3. 이전 기능 복구
- **'예시문제 만들기' 기능 복구**
  - 이전에 존재했으나 'AI로 시험지 생성' 기능으로 대체된 기능
  - 이 기능을 다시 활성화하여 사용자에게 제공

### 최종 결과
사용자는 다음 3가지 옵션을 모두 사용할 수 있어야 합니다:
1. 기존에 생성된 문제 불러오기 (새로 추가)
2. AI로 시험지 생성 (기존 기능 유지)
3. 예시문제 만들기 (복구)

*   **이미지 기반 영작/상황 설명:**
    *   **이미지 생성:** 이미지를 생성하고, 사용자가 그 이미지에 대한 설명을 영작하도록 합니다.
    *   **검토:** 제미나이 api는 사용자가 작성한 상황 설명이 적절한지 검토 후 문법, 어휘, 문장구조 등의 학습적인 측면에서 피드백을 제공합니다.
    *   *비용 우려:* 이미지 생성 API(예: 나노바나)가 비쌀 수 있으므로 비용을 확인하고, 테스트용으로는 하루에 한 개 정도 이미지를 만들어 등록하고 불러 쓰는 방식을 제안했습니다.
*   **글 요약 (뉴스 기반):**
    *   **개념:** 이미지 설명하기와 반대되는 개념으로, 글(뉴스 기사)을 읽고 내용을 요약하는 영작을 하게 하는 기능입니다.
    *   **저작권 회피:** 저작권 문제 때문에 기사 자체를 우리 서비스에 띄우지 않고, 해당 사이트를 팝업이나 iframe으로 띄워야 합니다. 학습자에게 '주제'파라미터를 제공받아서->관련 최신 메이져 기사의 url과 웹페이지 팝업창을 제공합니다다
    *   **평가:** 사용자가 요약문을 작성하여 제출하면 제미나이 api로 문법적 오류나 요약의 정확성을 평가 및 피트백 합니다. 이는 상급반 학습자에게 유용할 수 있습니다.
*   **명언 기반 장문 설명:** 유명한 명언(저작권 이슈가 적음)을 제시하고, 사용자가 이를 이해한 바를 영어로 길게 설명하도록 작성하는 기능입니다. 이는 요약이 아닌, 내용을 길게 표현하는 방식입니다.
*   **단어 문제 유형 추가:** 한국어 기반 영어 단어, 영어 기반 한국어 단어 찾기, 반의어/유사어 찾기, 단어의 시제 및 품사 변환(예: 명사의 형용사 찾기) 등의 단어 문제를 Edge Function을 이용해 생성하는 기능이 필요합니다. 새로운 `problem_type`으로 추가 필요.
*   **시험지 생성 UI 개선:** 현재 ai로 시험지 생성 버튼을 클릭시 문제 유형별 설정값이 모두 제각각인데, 기본 설정값을 0으로 해놓고, 필요한 것들만 선택해서 설정하게끔 수정.

### 2. 사업 추진 및 테스트 계획

*   **학원 원장 미팅:** 다음 주에 일산에 있는 학원 원장(박사 후배의 아내)을 만나 제품을 보여주고 피드백을 받을 계획입니다.
    *   **목표:** 학원 사용 시 발생할 수 있는 문제점 파악 및 예상 사용료/지불 의향 확인.
*   **테스트 방안:**
    *   무료로 제품을 사용하게 하고 피드백을 받는 방법.
    *   학생 20명 정도의 문제 사진을 받아 분석 후 개별 링크로 분석 정보를 보내주는 방법.
*   **B2B/B2C 전략:** 현재는 B2C 기반으로 개발하고 있으나, 판매는 B2C로 하고 사용은 B2B(학원)에서 하는 기준을 염두에 두고 있습니다.
*   **학원 관리 화면 필요성:** 학원 원장이 20명 학생 정보를 한꺼번에 볼 수 있는 관리 화면이 필요할 수 있지만, 현재 최우선 순위는 아니라고 판단하고 있습니다.
*   **향후 개발 일정:** 본격적인 개발은 내년 3월 이후(제안서 제출 및 과제 수주 후)에 많이 진행될 것으로 예상됩니다.

### 3. 외부 프로젝트(식약처)와 경력 관리

#### 3.1. 식약처 프로젝트 참여 조언
*   **식약처 계약 여부:** 학생이 식약처(식품 안전 정보원)에서 추가 계약을 할 수도 있음을 언급하며 교수님께 의견을 물었습니다.
*   **일용직/파트타임 지양:** 계약금이 일당(99,000원)으로 책정될 경우, 일용직 근로자나 파트타임으로 처리되어 **경력으로 인정받기 어렵고 오히려 이력서에 불리하게 작용할 수 있다**고 강력하게 조언했습니다.
*   **계약 형태 변경 요청:** 이력에 도움이 되도록 일당 대신 최소 한 달 반이나 두 달 같은 **계약직(프리랜서 형태)**으로 기간을 설정하여 계약할 것을 식약처에 문의해 보라고 조언했습니다.
*   **직책의 중요성:** 식약처 프로젝트의 직책이 **'연구원(연구원)'**으로 되어 있다면, 연구 보조원과 달리 실제 업무를 담당하는 사람으로 간주되므로 짧은 기간이라도 가치가 있다고 평가했습니다. 연구 보조원은 단순 서류 작업이나 잔심부름을 하는 직책으로 인식됩니다.

#### 3.2. 교수님의 조언 및 철학
*   **본인의 이익 최우선:** 교수님은 학생에게 **본인의 이력과 이익에 최대한 도움이 되도록** 움직여야 한다고 조언하며, 이것이 서로 오래갈 수 있는 비결이라고 강조했습니다.
*   **경력 확보의 중요성:** 현재 진행 중인 프로젝트(포스코, 현재 개발 건)도 경력으로 인정받게끔 6개월이나 1년 단위로 기간을 세팅해 줄 것이며, 식약처 경험까지 합치면 안정적인 취업이 가능한 수준이 될 것이라고 설명했습니다.
*   **스승의 의무:** 과거 자신의 지도 교수님(매우 엄했지만 학생에게 가장 유리한 의사 결정을 해 준 분)의 사례를 들며, 자신 역시 학생의 최선의 의사 결정을 돕는 것이 의무라고 밝혔습니다.
*   **스케줄 조정 요청:** 식약처 프로젝트 진행 시, 학생 신분임을 강조하며 공부, 영어 공부 등 진학 준비를 위해 약간의 시간적 여유(버퍼)를 달라고 요청하여 스케줄을 플렉서블하게 잡도록 조언했습니다.
*   **업무 윤리 강조:** 개발 중 어려운 상황이 생기더라도 사전에 미리 연락하여 양해를 구해야 하며, 연락 두절(잠수)은 피해야 한다고 당부했습니다.

#### 3.3. 기타 주의 사항
*   **조상 교수님 관련:** 식약처 프로젝트를 리드하는 조상 교수님은 본인 일이 아닌 상황에서는 일을 쉽게 얘기하는 경향이 있으니, 학생이 민감한 사안은 식약처에 직접 확인하거나 조상 교수님을 설득하여 목표를 명확하게 설정해야 한다고 조언했습니다.
*   **단기 인턴 기회:** 만약 식약처에서 (단기) 인턴 기회가 생긴다면, 이를 통해 실력을 보인 후 정직원 채용이나 회사 지원 석/박사 과정(학비 지원)으로 연결될 수 있으므로 무조건 가는 것이 좋다고 했습니다.

### 4. 문제지는 별도 팝업으로 띄워서 프린트 할 때 문제지만 나오도록 나중에 (지금 말고) 만들 필요가 있음. 리스트업만 해두면 될듯